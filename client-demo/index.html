<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <title>Tool Socket.IO Logger Demo</title>
    <style>
        textarea {
            width: 100%;
        }
        
        body {
            max-width: 960px;
            margin: auto;
        }
    </style>
</head>

<body>
    <article>
        <header>Simple Demo Page of <code>tool-socketio-logger</code></header>
        <section>
            <form>
                <p>
                    <fieldset>
                        <legend>Send message to the log server</legend>
                        <textarea name="" id="message" rows="10" placeholder="type message here"></textarea>
                    </fieldset>
                </p>

                <p>
                    <button type="reset">Reset</button>
                    <button id="send-msg-btn">Send</button>
                </p>
            </form>
        </section>
        <footer>by Unknown Moon</footer>
    </article>

    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script>
        + function() {
            if (io) {
                var socket = io('http://' + location.hostname + ':9528');
                var sendBtn = document.getElementById('send-msg-btn');
                var msgField = document.getElementById('message');
                sendBtn.addEventListener('click', function(evt) {
                    evt.preventDefault();
                    socket.emit('debug', {
                        'from': socket.id,
                        msg: msgField.value
                    });
                });
                socket.on('broadcast', function(data) {
                    console.log(data);
                    alert(JSON.stringify(data, null, 2));
                });
            } else {
                alert('socket.io load error');
            }
        }();
    </script>
</body>

</html>